<script>
  const size = 1000
  const inset = 100
  let offsetX = 0;
  let offsetY = 0;
  let brightness = 200;
  window.onload = () => {
    const canvas = document.getElementById("canvas")
    canvas.addEventListener("mousemove", handleMouse)
    canvas.addEventListener("mouseleave", resetOffset)
    draw()
  }
  
  const resetOffset = () => {
    offsetX = 0
    offsetY = 0
  }

  const handleMouse = (e) => {
    offsetX = inset * (1 - 2 * e.clientX / e.srcElement.clientWidth)
    offsetY = inset * (1 - 2 * e.clientY / e.srcElement.clientHeight)
  }

  const fillMirror = (ctx, x, y, w, h) => {
    ctx.fillRect(x, y, w, h)
    ctx.fillRect(1000 - x - w, y, w, h)
  }

  const droste = (ctx) => {
    ctx.drawImage(canvas, inset - offsetX, inset - offsetY, size - 2 * inset, size - 2 * inset)
    ctx.fillStyle = "darkgray"
    ctx.fillRect(0, 0, size - offsetX, inset - offsetY)
    ctx.fillRect(0, 0, inset - offsetX, size - offsetY)
    ctx.fillRect(size - inset - offsetX, 0, size, size)
    ctx.fillRect(0, size - inset - offsetY, size, size)
    ctx.fillStyle = "#00000011"
    ctx.fillRect(0, 0, size, size)
  }

  const c20Slice = (ctx) => {
    //Seam
    ctx.fillStyle = "#000000"
    ctx.fillRect(90, 300, 820, 5)
    fillMirror(ctx, 90, 300, 5, 600)

    //Handles
    ctx.fillStyle ="#dcb800"
    fillMirror(ctx, 345, 530, 20, 150)

    //Support
    ctx.fillStyle ="#555"
    fillMirror(ctx, 90, 830, 100, 50)
    fillMirror(ctx, 90, 830, 200, 30)

    //Chairs
    ctx.fillStyle = "#235acf"
    fillMirror(ctx, 95, 605, 260, 240)
    ctx.fillStyle = "#336adf"
    fillMirror(ctx, 100, 610, 120, 180)
    fillMirror(ctx, 30, 800, 150, 40)
    fillMirror(ctx, 230, 610, 120, 180)
    fillMirror(ctx, 190, 800, 150, 40)

    //Lights
    ctx.fillStyle = "#ffffff"
    fillMirror(ctx, 400, 250, 80, 40)

    //Windows
    brightness = Math.max(180, Math.min(255, brightness + 30 * (Math.random() - 0.5)))
    ctx.fillStyle = "rgb(" + brightness + "," + brightness + "," + brightness + ")"
    fillMirror(ctx, 0, 460, 80, 200)
  }

  const draw = () => {
    const canvas = document.getElementById("canvas")
    const ctx = canvas?.getContext("2d")

    droste(ctx)
    c20Slice(ctx)

    requestAnimationFrame(draw)
  }
</script>

<body>
  <canvas id="canvas" height="1000" width="1000">
</body>

<style>
  body {
    display: flex;
    flex-direction: column;
    align-items: center;
    background-color: darkgray;
  }
  #canvas {
    width: 100%;
    max-width: 700px;
    cursor: none;
  }
</style>